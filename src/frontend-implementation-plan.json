{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Fix Maui Lane header logo base-URL-safe loading with fallback",
  "requirements": [
    {
      "id": "REQ-6",
      "summary": "Make the Maui Lane Care Home header logo load reliably across base paths and fall back to the app icon without flicker.",
      "acceptanceCriteria": [
        "When loading the app, the header displays `maui-lane-logo.dim_512x512.png` without broken-image UI.",
        "If the logo file fails to load, the header automatically falls back to `maui-lane-app-icon.dim_256x256.png` and does not continuously retry or flicker.",
        "The resolved logo URL works correctly when the app is served from a non-root base path (i.e., `import.meta.env.BASE_URL` is not `/`)."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/maui/MauiAppShell.tsx",
          "operation": "modify",
          "description": "Update header logo URL construction to be base-URL-safe using `import.meta.env.BASE_URL` with a safe join strategy (e.g., URL-based resolution) to avoid double/missing slashes. Ensure the logo `src` references only existing generated assets: `frontend/public/assets/generated/maui-lane-logo.dim_512x512.png` as primary and `frontend/public/assets/generated/maui-lane-app-icon.dim_256x256.png` as fallback. Adjust the error handling so the fallback is applied exactly once (no continuous retries/flicker) if the primary logo fails to load."
        }
      ]
    }
  ]
}